<h2>Supply items for <%= @supplier.name %></h2>



<%= form_for [:admin, @supplier, @search] do |f| %>
  <p>Search for: </p>
  <%= f.text_field :keyword, :size => 25 %>
  <%= f.submit 'Search' %>
  
  <p>Limit to Manufacturer:</p>

  <%= f.select :manufacturer_contains,
      options_for_select([""] + @manufacturers_array) %>

  <p>Limit to Categories:</p>

  <p>
    <%= f.select :category_name_contains,        options_from_collection_for_select(@root_category.children_categories.flatten.map, :name, :fully_qualified_name),        {:include_blank => true} if @root_category%> 
  </p>
<% end %>


<% unless params[:search].blank? %>
<p>Search results for: <%= params[:search][:keyword] %></p>
<% end %>

<%= will_paginate @supply_items %>

<table id='supply_item_list'>
  <tr>
    <th>ID</th>
    <th>Manufacturer</th>
    <th>Supplier Code/Mfg. Code</th>
    <th>Name</th>
    <th>Status</th>
    <th>Purchase price</th>
    <th>Action</th>

  </tr>

<% @supply_items.each do |item| %>
  <tr class="<%= cycle('odd','even') %>" id="supply_item_<%= item.id %>">
    <td><%= item.id %></td>
    <td><%= item.manufacturer %></td>
    <td><%= item.supplier_product_code %> / <%=h item.manufacturer_product_code %></td>
    <td><%= item.name %></td>
    <td><%= item.status_human %></td>
    <td class="price"><%= item.purchase_price %></td>
    <td>
      <%= link_to 'Create Product', new_from_supply_item_admin_products_path(:supply_item_id => item), :class => 'fancybox' %>
      <%= link_to 'Edit Product', edit_admin_product_path(item.product), :class => 'fancybox' unless item.product.nil? %>
    </td>
  </tr>
  <tr id="form">
    <td colspan="7"><%= render 'form', :item => item %></td> 
  </tr>
  
  <%-#= render :partial => 'product_alternatives', :locals => {:item => item} %>

<% end %>
</table>

<%= will_paginate @supply_items %>

<br />
